$(document).ready((function(){$(':input[autocomplete="off"]').val("");$(":input[data-onload-value]").each((function(){$(this).val($(this).attr("data-onload-value"))}))}));function loadCalendarMonthOnClick(){var month=parseInt($(this).attr("data-month"));var container=$("div#calendar-container");if($(container).length&&month>0&&month<=12){$(container).load(window.location+" #calendar-wrapper",{action:"calendar",month:month},(function(){}))}}$((function(){$('[data-toggle="tooltip"]').tooltip();$(document).on("click",".calendar-switch",loadCalendarMonthOnClick);$("li[data-stripe]").hover((function(e){$(this).addClass($(this).attr("data-stripe"))}),(function(e){if(!$(this).hasClass("active")){$(this).removeClass($(this).attr("data-stripe"))}}));$("[data-inbox-action]").on("click",(function(){var inboxAction=$(this).attr("data-inbox-action");var inboxPath=$(this).attr("data-inbox-path");if(typeof inboxPath==="string"&&typeof inboxAction==="string"){xhrCall(inboxPath,{action:inboxAction},{type:"post"},(function(result){xhrResult(result);if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("hideThread")){$("#thread_"+result["hideThread"]).hide();return}setTimeout((function(){document.location.reload()}),1500)}}))}}));$("form#verify-upload").on("submit",(function(e){e.preventDefault();e.stopPropagation();var form=$(this);resetForm(form);xhrFormData(form,(function(result){processFormResult(form,result);if(result.hasOwnProperty("success")&&result["success"]===true){setTimeout((function(){document.location.reload()}),1500)}}))}));$("button.deposit-calc").on("click",(function(){var form=$(this).closest("form");depositCalculate(form)}));$("input.deposit-amount").on("keyup input",(function(){var form=$(this).closest("form");var amount=$(form).find("input.deposit-amount").val();if(amount.slice(-1)!=="."){if(amount.length&&parseFloat(amount)>0){depositCalculate(form)}}}));$("input.deposit-gateway").on("click blur",(function(){var form=$(this).closest("form");depositCalculate(form);var depositMinimum=$(".deposit-minimum");if($(depositMinimum).length){var gatewayMinimum=$(this).attr("data-minimum");if(gatewayMinimum.length){gatewayMinimum=parseFloat(gatewayMinimum);if(gatewayMinimum>0){$(depositMinimum).html(gatewayMinimum);$(depositMinimum).closest("div.form-group").show()}}}}));$("form#deposit-form").on("submit",(function(e){e.preventDefault();var form=$(this);regularXhrForm(form,(function(data){if(data.hasOwnProperty("success")&&data["success"]===true){if(data.hasOwnProperty("reinvested")&&data["reinvested"]===true){$(form).attr("action","");$(form).find(":submit").remove();setTimeout((function(){document.location.reload()}),1500)}else{var depositModal=$("#deposit-modal");var depositInstructions="";if(data.hasOwnProperty("instructions")){depositInstructions=data["instructions"];$(depositModal).find(".deposit-instructions").text(depositInstructions)}if(data.hasOwnProperty("currency")&&data.hasOwnProperty("deposit")){$(depositModal).find("div.deposit-qr-code").hide();$(depositModal).find("div.deposit-addr-container").hide();$(depositModal).find("div.deposit-meta").hide();$(depositModal).find(".deposit-addr").val(data["deposit"]);$(depositModal).find(".deposit-addr-container .btn-copy").attr("data-copy-value",data["deposit"]);$(depositModal).find("div.deposit-addr-container").show();window.depositCurrency=data["currency"]}if(data.hasOwnProperty("qrCode")){window.depositAddress=data["qrCode"];renderQrcode(data["qrCode"],"deposit-address-qrcode")}$(depositModal).modal("show")}$(form)[0].reset()}}))}));$("button.withdraw-calc").on("click",(function(){var form=$(this).closest("form");withdrawCalculate(form)}));$("input.withdraw-amount").on("blur",(function(){var form=$(this).closest("form");withdrawCalculate(form)}));$("input.withdraw-gateway").on("click",(function(){var form=$(this).closest("form");var payeeId=$(this).attr("data-payee");if(typeof payeeId==="string"&&payeeId.length){$(form).find("input.withdraw-payee").val(payeeId)}withdrawCalculate(form)}));$(".disable-2fa-sms-request").on("click",(function(){var self=this;var form=$(this).closest("form");if($(form).is("form")){var formData=$(form).serializeObject();formData["action"]="issue_code";xhrCall($(form).attr("action"),formData,{type:"post"},(function(data){processFormResult(form,data);if(data.hasOwnProperty("success")&&data["success"]===true){$(self).hide()}}))}}));$(".auth-2fa-resend-sms").on("click",(function(){var self=this;var form=$(this).closest("form");if($(form).is("form")){var formData=$(form).serializeObject();formData["action"]="resend";xhrCall($(form).attr("action"),formData,{type:"post"},(function(data){processFormResult(form,data);if(data.hasOwnProperty("success")&&data["success"]===true){$(self).hide()}}))}}));document.querySelectorAll(".btn-copy").forEach((function(element){$(element).on("click",(function(){if(element.dataset.copyValue){copyToClipBoard(element.dataset.copyValue,element.dataset.copyMessage)}}))}));$("form#upload-video").on("submit",(function(e){e.preventDefault();e.stopPropagation();var form=$(this);resetForm(form);xhrFormData(form,(function(result){processFormResult(form,result);if(result.hasOwnProperty("success")&&result["success"]===true){setTimeout((function(){document.location.reload()}),1500)}}))}));$(".buy-btc-amount").on("click blur",(function(e){e.preventDefault();e.stopPropagation();var amount=$(this).val();var form=$(this).closest("form");var resultContainer=$(".buy-btc-total");$(resultContainer).closest("div.form-group").hide();xhrCall($(form).attr("action"),{action:"buy_calculate",amount:amount},{},(function(result){xhrResult(result);if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("output")&&result["output"].length){$(resultContainer).text(result["output"]);$(resultContainer).closest("div.form-group").show()}}}))}));$(".sell-btc-amount").on("click blur",(function(e){e.preventDefault();e.stopPropagation();var amount=$(this).val();var form=$(this).closest("form");var resultContainer=$(".sell-btc-total");$(resultContainer).closest("div.form-group").hide();xhrCall($(form).attr("action"),{action:"sell_calculate",amount:amount},{},(function(result){xhrResult(result);if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("output")&&result["output"].length){$(resultContainer).text(result["output"]);$(resultContainer).closest("div.form-group").show()}}}))}))}));async function copyToClipBoard(text,msg="Text copied"){try{await navigator.clipboard.writeText(text);issueNoty("success",msg,"bottom")}catch(ex){issueNoty("error","Cannot copy "+text+" to clipboard!!!!","bottom")}}function depositCalculate(form){if($(form).is("form")){$(form).find(".deposit-fee").text("0.0000");$(form).find(".deposit-net").text("0.0000");$(form).find(".deposit-fee-literal").text("");$(form).find(".deposit-expires").text("0");$(form).find(".deposit-expires").closest("div.form-group").hide();var formData=$(form).serializeObject();formData["action"]="calculate";xhrCall($(form).attr("action"),formData,{type:"get"},(function(data){processFormResult(form,data);if(data.hasOwnProperty("success")&&data["success"]===true){if(data.hasOwnProperty("fee")){$(form).find(".deposit-fee").html(`<span>${data["fee"]}</span> <span style="color:#78ea43;font-weight:bold;">$${data["feeFiat"]}</span>`)}if(data.hasOwnProperty("feeLiteral")){$(form).find(".deposit-fee-literal").text("("+data["feeLiteral"]+"%)")}if(data.hasOwnProperty("netAmount")){window.depositAmount=data["netAmount"];$(form).find(".deposit-net").html(`<span>${data["netAmount"]}</span> <span style="color:#78ea43;font-weight:bold;">$${data["netAmountFiat"]}</span>`);let chainInfo="Bitcoin Chain";if(depositCurrency==="USDT"){chainInfo="Ethereum Chain"}else if(depositCurrency==="ETH"){chainInfo="Ethereum Chain"}$("#deposit-m-amount").html(`<span>Amount: <strong>${data["netAmount"]}</strong> ${depositCurrency} on <strong>${chainInfo}</strong></span> <span style="color:#78ea43;font-weight:bold;">$${data["netAmountFiat"]}</span> <span>to deposit</span>`)}if(data.hasOwnProperty("expiresIn")){$(form).find(".deposit-expires").text(data["expiresIn"]);$(form).find(".deposit-expires").closest("div.form-group").show()}}}))}}function withdrawCalculate(form){if($(form).is("form")){$(form).find(".withdraw-fee").text("0.0000");$(form).find(".withdraw-net").text("0.0000");$(form).find(".withdraw-fee-literal").text("");var formData=$(form).serializeObject();formData["action"]="calculate";xhrCall($(form).attr("action"),formData,{type:"get"},(function(data){processFormResult(form,data);if(data.hasOwnProperty("success")&&data["success"]===true){if(data.hasOwnProperty("fee")){$(form).find(".withdraw-fee").html(`<span>${data["fee"]}</span> <span style="color:#78ea43;font-weight:bold;">$${data["feeFiat"]}</span>`)}if(data.hasOwnProperty("feeLiteral")){$(form).find(".withdraw-fee-literal").text("("+data["feeLiteral"]+"%)")}if(data.hasOwnProperty("netAmount")){$(form).find(".withdraw-net").html(`<span>${data["netAmount"]}</span> <span style="color:#78ea43;font-weight:bold;">$${data["netAmountFiat"]}</span>`)}}}))}}$((function(){$("select.calc-currencies").on("change blur click",(function(){var option=$(this).find("option:selected");if($(option).length){$(".set-currency-sign").html(`<img src="${$(option).attr("data-currency-sign")}" alt="crypto currency logo" class="logo-bg" width="14" height="14">`)}var code=$(option).val();if(typeof code==="string"){var start=0;switch(code){case"EUR":case"USD":start=1e3;break;case"BTC":start=1;break;case"RUB":start=5e4;break}if(start>0){$(".calc-amount").val(start)}}}));$("input.calc-amount").on("change blur",(function(){calculatorPickLevel()}));$("form#calc-simulator").on("submit",(function(e){e.preventDefault();e.stopPropagation();var form=this;var simulationResult=$("#simulation");var simulationResultTable=$(simulationResult).find("table#simulation-days").find("tbody");var currencySign=$(this).find("select.calc-currencies").find('option[value="'+$(this).find("select.calc-currencies").val()+'"]').attr("data-currency-sign");$(simulationResult).hide();$(simulationResultTable).empty();regularXhrForm(form,(function(result){if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("simulation")&&typeof result["simulation"]==="object"){var simulation=result["simulation"];if(simulation.hasOwnProperty("days")&&typeof simulation["days"]==="object"){var days=simulation["days"];$.each(days,(function(num,day){var row=$("<tr></tr>");$(row).append($("<td></td>").addClass("text-center").text(day["num"]));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["capital"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["capitalFiat"]}</div>`));$(row).append($("<td></td>").addClass("text-right").text(day["roiPercentage"]+"%"));$(row).append($("<td></td>").addClass("text-right").text(simulation["level"]["share"]+"%"));$(row).append($("<td></td>").addClass("text-right").text(day["roiPercentageShare"]+"%"));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["roiTotal"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["roiTotalFiat"]}</div>`));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["roiPaid"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["roiPaidFiat"]}</div>`));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["roiCompound"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["roiCompoundFiat"]}</div>`));$(simulationResultTable).append(row)}))}$(simulationResult).find('[data-simulation="principal"]').html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${simulation["principal"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${simulation["principalFiat"]}</div>`);$(simulationResult).find('[data-simulation="compounded"]').text(simulation["compound"]+"%");$(simulationResult).find('[data-simulation="return"]').html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${simulation["totalReturn"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${simulation["totalReturnFiat"]}</div>`);$(simulationResult).find('[data-simulation="profit"]').html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${simulation["profit"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${simulation["profitFiat"]}</div>`);$(simulationResult).find('[data-simulation="duration"]').text(simulation["duration"]);$(simulationResult).show()}}}))}))}));$((function(){$("input.points-sell-amount").on("blur",(function(){var form=$(this).closest("form");calculatePointsExchange(form)}));$(".points-sell-currency").on("change",(function(){var form=$(this).closest("form");calculatePointsExchange(form)}))}));function calculatePointsExchange(form){if($(form).is("form")){$(form).find("span.points-sell-calculated").each((function(){var defaultValue=$(this).attr("data-default");if(defaultValue.length){$(this).text(defaultValue)}}));var formData=$(form).serializeObject();formData["action"]="calculate";xhrCall($(form).attr("action"),formData,{type:"get"},(function(result){xhrResult(result);if(typeof result==="object"){if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("calculate")){var calculation=result["calculate"];if(typeof calculation==="object"){$(form).find("span.points-sell-calculated").each((function(){var span=this;var param=$(this).attr("data-param");if(typeof param==="string"&&param.length){if(calculation.hasOwnProperty(param)){$(span).text(calculation[param])}}}))}}}}}))}}function calculatorPickLevel(){var calculator=$("form#calc-simulator");if($(calculator).length){var formData=$(calculator).serializeObject();formData["action"]="level_share";xhrCall($(calculator).attr("action"),formData,{type:"get"},(function(result){if(typeof result==="object"){if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("share")){var share=parseInt(result["share"]);if(share>0){$(calculator).find("select.calc-level").find('option[value="'+share+'"]').attr("selected","selected")}}}}}))}}$((function(){$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,(function(){if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}}));return o}}));$("#deposit-qrcode-select").on("change",(function(){const selectedValue=parseInt(this.value);let text="";let coinName="";if(selectedValue===1){text=depositAddress}else if(selectedValue===2){if(window.depositCurrency==="BTC"){coinName=`bitcoin:`}else if(window.depositCurrency==="ETH"){coinName=`ethereum:`}else if(window.depositCurrency==="USDT"){coinName=`ethereum:`}text=`${coinName}${depositAddress}?amount=${depositAmount}`}renderQrcode(text,"deposit-address-qrcode")}));function renderQrcode(text,imageElId,imageSrc="/images/svg/logo.svg"){new QrCodeWithLogo({width:1080,content:text,image:document.getElementById(imageElId),cornersOptions:{type:"circle-star"},dotsOptions:{type:"star"},logo:{src:imageSrc}})}function addSwipeListener(element,callback){let startX,startY,startTime;element.addEventListener("touchstart",(e=>{const touch=e.touches[0];startX=touch.pageX;startY=touch.pageY;startTime=(new Date).getTime()}));element.addEventListener("touchend",(e=>{const touch=e.changedTouches[0];const deltaX=touch.pageX-startX;const deltaY=touch.pageY-startY;const elapsedTime=(new Date).getTime()-startTime;const threshold=50;const restraint=100;const allowedTime=500;if(elapsedTime<=allowedTime){if(Math.abs(deltaX)>=threshold&&Math.abs(deltaY)<=restraint){callback(deltaX<0?"left":"right")}else if(Math.abs(deltaY)>=threshold&&Math.abs(deltaX)<=restraint){callback(deltaY<0?"up":"down")}}}))}function loadCalendarMonthOnSwipe(direction){const now=new Date;const currMonth=now.getMonth()+1;const selectedMonth=parseInt($(".calendar").attr("data-month"));let month=null;if(direction==="left"&&selectedMonth<currMonth){month=selectedMonth+1}else if(direction==="right"&&selectedMonth>1){month=selectedMonth-1}else{return}if(!month)return;var container=$("div#calendar-container");if($(container).length&&month>0&&month<=12){$(container).load(window.location+" #calendar-wrapper",{action:"calendar",month:month},(function(){}))}}$((function(){const calendarEl=document.querySelector("#calendar-container");if(calendarEl){addSwipeListener(calendarEl,loadCalendarMonthOnSwipe)}}));