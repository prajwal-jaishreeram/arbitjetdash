var root=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");$(document).ready((function(){var calculator=$("form#calc-simulator");if($(calculator).length){}}));$(document).ready((function(){var hash=document.location.hash;if(typeof hash==="string"&&hash.length){if(hash==="#signup"||hash==="signup"){var signupModal=$("#signup");$(signupModal).modal({show:true,remote:"signup?action=modal"})}}}));$(document).on("click",".calendar-switch",(function(){var month=parseInt($(this).attr("data-month"));var container=$("div#calendar-container");if($(container).length&&month>0&&month<=12){$(container).load(window.location+" #calendar-wrapper",{action:"calendar",month:month},(function(){}))}}));$((function(){$("select.calc-currencies").on("change blur click",(function(){var option=$(this).find("option:selected");if($(option).length){$(".set-currency-sign").html(`<img src="${$(option).attr("data-currency-sign")}" alt="crypto currency logo" class="logo-bg" width="14" height="14">`)}var code=$(option).val();if(typeof code==="string"){var start=0;switch(code){case"EUR":case"USD":start=1e3;break;case"BTC":start=1;break;case"RUB":start=5e4;break}if(start>0){$(".calc-amount").val(start)}}}));$("input.calc-amount").on("change blur",(function(){calculatorPickLevel()}));$("form#calc-simulator").on("submit",(function(e){e.preventDefault();e.stopPropagation();var form=this;var simulationResult=$("#simulation");var simulationResultTable=$(simulationResult).find("table#simulation-days").find("tbody");var currencySign=$(this).find("select.calc-currencies").find('option[value="'+$(this).find("select.calc-currencies").val()+'"]').attr("data-currency-sign");$(simulationResult).hide();$(simulationResultTable).empty();regularXhrForm(form,(function(result){if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("simulation")&&typeof result["simulation"]==="object"){var simulation=result["simulation"];if(simulation.hasOwnProperty("days")&&typeof simulation["days"]==="object"){var days=simulation["days"];$.each(days,(function(num,day){var row=$("<tr></tr>");$(row).append($("<td></td>").addClass("text-center").text(day["num"]));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["capital"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["capitalFiat"]}</div>`));$(row).append($("<td></td>").addClass("text-right").text(day["roiPercentage"]+"%"));$(row).append($("<td></td>").addClass("text-right").text(simulation["level"]["share"]+"%"));$(row).append($("<td></td>").addClass("text-right").text(day["roiPercentageShare"]+"%"));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["roiTotal"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["roiTotalFiat"]}</div>`));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["roiPaid"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["roiPaidFiat"]}</div>`));$(row).append($("<td></td>").addClass("text-right").html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${day["roiCompound"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${day["roiCompoundFiat"]}</div>`));$(simulationResultTable).append(row)}))}$(simulationResult).find('[data-simulation="principal"]').html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${simulation["principal"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${simulation["principalFiat"]}</div>`);$(simulationResult).find('[data-simulation="compounded"]').text(simulation["compound"]+"%");$(simulationResult).find('[data-simulation="return"]').html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${simulation["totalReturn"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${simulation["totalReturnFiat"]}</div>`);$(simulationResult).find('[data-simulation="profit"]').html(`<div><img src="${currencySign}" alt="crypto logo" class="logo-bg" width="14" height="14"><span class="ml-1p">${simulation["profit"]}</span></div><div style="color:#78ea43;font-weight:bold;">$${simulation["profitFiat"]}</div>`);$(simulationResult).find('[data-simulation="duration"]').text(simulation["duration"]);$(simulationResult).show()}}}))}))}));function calculatorPickLevel(){var calculator=$("form#calc-simulator");if($(calculator).length){var formData=$(calculator).serializeObject();formData["action"]="level_share";xhrCall($(calculator).attr("action"),formData,{type:"get"},(function(result){if(typeof result==="object"){if(result.hasOwnProperty("success")&&result["success"]===true){if(result.hasOwnProperty("share")){var share=parseInt(result["share"]);if(share>0){$(calculator).find("select.calc-level").find('option[value="'+share+'"]').attr("selected","selected")}}}}}))}}$((function(){$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,(function(){if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}}));return o}}));