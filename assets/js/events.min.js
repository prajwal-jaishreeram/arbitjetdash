const SSE_LISTENERS=[];let sse_retry=false;function connectSse(){if(window?.sse&&window.sse.readyState!==EventSource.CLOSED)return;window.sse=new EventSource("/events");window.sse.onopen=()=>{SSE_LISTENERS.forEach((({event:event,func:func})=>{window.sse.addEventListener(event,func)}))};window.sse.onclose=function(){SSE_LISTENERS.forEach((({event:event,func:func})=>{window.sse.removeEventListener(event,func)}))};window.sse.onerror=err=>{window.sse.close();setTimeout(connectSse,3e4)}}function addSseListener(event,func){SSE_LISTENERS.push({event:event,func:func});if(!window?.sse){connectSse()}}